<!DOCTYPE html>
<html lang="en">
<head></head>
<body>
<a href="https://egghead.io/lessons/rxjs-demystifying-cold-and-hot-observables-in-rxjs" target="_blank">
  https://egghead.io/lessons/rxjs-demystifying-cold-and-hot-observables-in-rxjs
</a>
<script src="/lib/rxjs/dist/rx.all.js"></script>
<script>
  var source = Rx.Observable
    .interval(1000)
    .take(7)
    .doAction((x)=> {
      log('Side effect'+x, 'pink');
    });

  var published = source.shareReplay(3);

  published.subscribe(createObserver('SourceA', 'red'));

  setTimeout(() => {
    published.subscribe(createObserver('SourceB', 'green'));
  }, 5000);


  // Creating a third subscription after the previous two subscriptions have
  // completed. Notice that it gets the last three values from the published stream
  // because the notifications are cached and replayed.
  Rx.Observable
    .return(true)
    .delay(9000)
    .flatMap(published)
    .subscribe(createObserver('SourceC', 'blue'));

  function createObserver(tag, col) {
    return Rx.Observer.create(
      (x)=> {
        log('Next: ' + tag + x, col);
      },
      function (err) {
        log('Error: ' + err);
      },
      function () {
        log('Completed ' + tag, col);
      });
  }


</script>

</body>
</html>