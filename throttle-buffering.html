<!DOCTYPE html>
<html lang="en">
<head></head>
<body>
<h3>throttled buffering</h3>

<p>see ben lesh video on egghead.io</p>

<button id="clickMe">Click Me</button>

<h4>values sent</h4>
<div id="results"></div>


<script src="/bower_components/rxjs/dist/rx.all.js"></script>
<script>
    var btn = document.querySelector('#clickMe');
    var clicks = Rx.Observable.fromEvent(btn, 'click');
    var open = Rx.Observable.interval(2000);


    clicks
    .scan(function (s) {
        return s+ 1;
    }, 0)
    .buffer(clicks.throttle(2000)) // try replacing "clicks.throttle(1000)" with "open"
    .forEach(function (x) {
        console.log(x);
        sendValues(x);
    });


    function sendValues(arr) {
        var pre = document.createElement('pre');
        pre.innerHTML = JSON.stringify(arr);
        document.querySelector('#results').appendChild(pre);
    }



</script>

</body>
</html>